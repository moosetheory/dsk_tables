"use strict";const w=require("electron"),k=require("node:path"),P=require("path"),I=require("child_process"),T=require("tty"),z=require("util"),G=require("fs"),L=require("net");function J(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var b={exports:{}},q={exports:{}},S={exports:{}},_,A;function Z(){if(A)return _;A=1;var a=1e3,e=a*60,l=e*60,u=l*24,f=u*365.25;_=function(r,n){n=n||{};var o=typeof r;if(o==="string"&&r.length>0)return v(r);if(o==="number"&&isNaN(r)===!1)return n.long?g(r):d(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function v(r){if(r=String(r),!(r.length>100)){var n=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(r);if(n){var o=parseFloat(n[1]),p=(n[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return o*f;case"days":case"day":case"d":return o*u;case"hours":case"hour":case"hrs":case"hr":case"h":return o*l;case"minutes":case"minute":case"mins":case"min":case"m":return o*e;case"seconds":case"second":case"secs":case"sec":case"s":return o*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function d(r){return r>=u?Math.round(r/u)+"d":r>=l?Math.round(r/l)+"h":r>=e?Math.round(r/e)+"m":r>=a?Math.round(r/a)+"s":r+"ms"}function g(r){return i(r,u,"day")||i(r,l,"hour")||i(r,e,"minute")||i(r,a,"second")||r+" ms"}function i(r,n,o){if(!(r<n))return r<n*1.5?Math.floor(r/n)+" "+o:Math.ceil(r/n)+" "+o+"s"}return _}var D;function R(){return D||(D=1,(function(a,e){e=a.exports=f.debug=f.default=f,e.coerce=i,e.disable=d,e.enable=v,e.enabled=g,e.humanize=Z(),e.names=[],e.skips=[],e.formatters={};var l;function u(r){var n=0,o;for(o in r)n=(n<<5)-n+r.charCodeAt(o),n|=0;return e.colors[Math.abs(n)%e.colors.length]}function f(r){function n(){if(n.enabled){var o=n,p=+new Date,s=p-(l||p);o.diff=s,o.prev=l,o.curr=p,l=p;for(var t=new Array(arguments.length),h=0;h<t.length;h++)t[h]=arguments[h];t[0]=e.coerce(t[0]),typeof t[0]!="string"&&t.unshift("%O");var c=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(y,F){if(y==="%%")return y;c++;var O=e.formatters[F];if(typeof O=="function"){var N=t[c];y=O.call(o,N),t.splice(c,1),c--}return y}),e.formatArgs.call(o,t);var m=n.log||e.log||console.log.bind(console);m.apply(o,t)}}return n.namespace=r,n.enabled=e.enabled(r),n.useColors=e.useColors(),n.color=u(r),typeof e.init=="function"&&e.init(n),n}function v(r){e.save(r),e.names=[],e.skips=[];for(var n=(typeof r=="string"?r:"").split(/[\s,]+/),o=n.length,p=0;p<o;p++)n[p]&&(r=n[p].replace(/\*/g,".*?"),r[0]==="-"?e.skips.push(new RegExp("^"+r.substr(1)+"$")):e.names.push(new RegExp("^"+r+"$")))}function d(){e.enable("")}function g(r){var n,o;for(n=0,o=e.skips.length;n<o;n++)if(e.skips[n].test(r))return!1;for(n=0,o=e.names.length;n<o;n++)if(e.names[n].test(r))return!0;return!1}function i(r){return r instanceof Error?r.stack||r.message:r}})(S,S.exports)),S.exports}var B;function H(){return B||(B=1,(function(a,e){e=a.exports=R(),e.log=f,e.formatArgs=u,e.save=v,e.load=d,e.useColors=l,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:g(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function l(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(i){try{return JSON.stringify(i)}catch(r){return"[UnexpectedJSONParseError]: "+r.message}};function u(i){var r=this.useColors;if(i[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+i[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!!r){var n="color: "+this.color;i.splice(1,0,n,"color: inherit");var o=0,p=0;i[0].replace(/%[a-zA-Z%]/g,function(s){s!=="%%"&&(o++,s==="%c"&&(p=o))}),i.splice(p,0,n)}}function f(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function v(i){try{i==null?e.storage.removeItem("debug"):e.storage.debug=i}catch{}}function d(){var i;try{i=e.storage.debug}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=process.env.DEBUG),i}e.enable(d());function g(){try{return window.localStorage}catch{}}})(q,q.exports)),q.exports}var C={exports:{}},U;function Y(){return U||(U=1,(function(a,e){var l=T,u=z;e=a.exports=R(),e.init=p,e.log=i,e.formatArgs=g,e.save=r,e.load=n,e.useColors=d,e.colors=[6,2,3,4,5,1],e.inspectOpts=Object.keys(process.env).filter(function(s){return/^debug_/i.test(s)}).reduce(function(s,t){var h=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(m,y){return y.toUpperCase()}),c=process.env[t];return/^(yes|on|true|enabled)$/i.test(c)?c=!0:/^(no|off|false|disabled)$/i.test(c)?c=!1:c==="null"?c=null:c=Number(c),s[h]=c,s},{});var f=parseInt(process.env.DEBUG_FD,10)||2;f!==1&&f!==2&&u.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var v=f===1?process.stdout:f===2?process.stderr:o(f);function d(){return"colors"in e.inspectOpts?!!e.inspectOpts.colors:l.isatty(f)}e.formatters.o=function(s){return this.inspectOpts.colors=this.useColors,u.inspect(s,this.inspectOpts).split(`
`).map(function(t){return t.trim()}).join(" ")},e.formatters.O=function(s){return this.inspectOpts.colors=this.useColors,u.inspect(s,this.inspectOpts)};function g(s){var t=this.namespace,h=this.useColors;if(h){var c=this.color,m="  \x1B[3"+c+";1m"+t+" \x1B[0m";s[0]=m+s[0].split(`
`).join(`
`+m),s.push("\x1B[3"+c+"m+"+e.humanize(this.diff)+"\x1B[0m")}else s[0]=new Date().toUTCString()+" "+t+" "+s[0]}function i(){return v.write(u.format.apply(u,arguments)+`
`)}function r(s){s==null?delete process.env.DEBUG:process.env.DEBUG=s}function n(){return process.env.DEBUG}function o(s){var t,h=process.binding("tty_wrap");switch(h.guessHandleType(s)){case"TTY":t=new l.WriteStream(s),t._type="tty",t._handle&&t._handle.unref&&t._handle.unref();break;case"FILE":var c=G;t=new c.SyncWriteStream(s,{autoClose:!1}),t._type="fs";break;case"PIPE":case"TCP":var m=L;t=new m.Socket({fd:s,readable:!1,writable:!0}),t.readable=!1,t.read=null,t._type="pipe",t._handle&&t._handle.unref&&t._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return t.fd=s,t._isStdio=!0,t}function p(s){s.inspectOpts={};for(var t=Object.keys(e.inspectOpts),h=0;h<t.length;h++)s.inspectOpts[t[h]]=e.inspectOpts[t[h]]}e.enable(n())})(C,C.exports)),C.exports}var j;function K(){return j||(j=1,typeof process<"u"&&process.type==="renderer"?b.exports=H():b.exports=Y()),b.exports}var E,M;function Q(){if(M)return E;M=1;var a=P,e=I.spawn,l=K()("electron-squirrel-startup"),u=w.app,f=function(d,g){var i=a.resolve(a.dirname(process.execPath),"..","Update.exe");l("Spawning `%s` with args `%s`",i,d),e(i,d,{detached:!0}).on("close",g)},v=function(){if(process.platform==="win32"){var d=process.argv[1];l("processing squirrel command `%s`",d);var g=a.basename(process.execPath);if(d==="--squirrel-install"||d==="--squirrel-updated")return f(["--createShortcut="+g],u.quit),!0;if(d==="--squirrel-uninstall")return f(["--removeShortcut="+g],u.quit),!0;if(d==="--squirrel-obsolete")return u.quit(),!0}return!1};return E=v(),E}var V=Q();const X=J(V);X&&w.app.quit();const W=()=>{const a=new w.BrowserWindow({width:1050,height:680,show:!1,webPreferences:{preload:k.join(__dirname,"preload.js"),webSecurity:!1,allowRunningInsecureContent:!0}});a.loadFile(k.join(__dirname,"../renderer/main_window/index.html")),a.once("ready-to-show",()=>{a.show()}),a.webContents.openDevTools()};w.app.on("ready",W);w.app.on("window-all-closed",()=>{process.platform!=="darwin"&&w.app.quit()});w.app.on("activate",()=>{w.BrowserWindow.getAllWindows().length===0&&W()});
